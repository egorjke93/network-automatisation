# Network Collector Configuration
# ================================
# Скопируйте этот файл в config.yaml и настройте под свои нужды.
#
# Порядок приоритета настроек:
#   1. Аргументы командной строки (высший приоритет)
#   2. Переменные окружения
#   3. config.yaml
#   4. Значения по умолчанию
#
# Автоматически ищутся файлы: config.yaml, config.yml, .network_collector.yaml
# Или укажите явно: python -m network_collector -c /path/to/config.yaml mac

# =============================================================================
# НАСТРОЙКИ ВЫВОДА
# =============================================================================
output:
  # Папка для сохранения отчётов
  output_folder: "reports"

  # Формат по умолчанию: excel, csv, json
  default_format: "excel"

  # Формат MAC-адресов:
  #   ieee  - 00:11:22:33:44:55 (двоеточия)
  #   cisco - 0011.2233.4455 (точки, по 4 символа)
  #   unix  - 00-11-22-33-44-55 (дефисы)
  mac_format: "ieee"

  # Сохранять отдельный файл для каждого устройства
  per_device: false

  # Настройки CSV
  csv_delimiter: ","
  csv_quotechar: '"'
  csv_encoding: "utf-8"

  # Настройки Excel
  excel_autofilter: true
  excel_freeze_header: true

# =============================================================================
# НАСТРОЙКИ ПОДКЛЮЧЕНИЯ
# =============================================================================
connection:
  # Таймауты (секунды)
  conn_timeout: 10
  read_timeout: 30

  # Максимум параллельных подключений
  max_workers: 5

  # Повторные попытки при ошибке
  max_retries: 2
  retry_delay: 5

# =============================================================================
# НАСТРОЙКИ ПАРСЕРА
# =============================================================================
parser:
  # Использовать NTC Templates
  use_ntc_templates: true

  # Путь к кастомным шаблонам TextFSM (опционально)
  # custom_templates_path: "/path/to/templates"

# =============================================================================
# НАСТРОЙКИ NETBOX
# =============================================================================
# Также можно задать через переменные окружения:
#   export NETBOX_URL="https://netbox.example.com"
#   export NETBOX_TOKEN="your-api-token"
netbox:
  # URL NetBox API
  url: "http://localhost:8000/"

  # API токен
  token: "4dd51a78084a1c18c7dc95f56a5355c692811c02"

  # Проверять SSL сертификат
  verify_ssl: true

  # Таймаут запросов (секунды)
  timeout: 30

  # Создавать объекты если не существуют
  create_missing: false

  # Обновлять существующие объекты
  update_existing: true

# =============================================================================
# НАСТРОЙКИ MAC КОЛЛЕКТОРА
# =============================================================================
mac:
  # Собирать описания интерфейсов (по умолчанию true)
  # Выполняет дополнительную команду "show interfaces description"
  collect_descriptions: true

  # Включать trunk порты в вывод (по умолчанию false)
  # Если true - MAC с trunk портов тоже попадут в таблицу
  collect_trunk_ports: false

  # Собирать sticky MAC из port-security (по умолчанию false)
  # Парсит show running-config для извлечения sticky MAC-адресов
  # Позволяет видеть offline устройства (чей MAC в port-security, но порт down)
  collect_port_security: false

# =============================================================================
# ФИЛЬТРЫ ДЛЯ MAC КОЛЛЕКТОРА
# =============================================================================
# Эти фильтры применяются ТОЛЬКО к сбору MAC-адресов.
# Настройки полей для экспорта находятся в fields.yaml
# =============================================================================
filters:
  # VLAN для исключения из результатов MAC-таблицы
  # Пример: [1, 999, 4094]
  exclude_vlans: []

  # Интерфейсы для исключения (regex паттерны)
  # По умолчанию исключаются: Vlan, Loopback, Port-channel, mgmt, CPU
  exclude_interfaces:
    - "^Vlan\\d+"
    - "^Vl\\d+"
    - "^Loopback\\d+"
    - "^Lo\\d+"
    - "^Null\\d+"
    - "^Port-channel\\d+"
    - "^Po\\d+"
    - "^mgmt\\d*"
    - "^CPU$"
    - "^Switch$"
    - "^Router$"
    - "^Sup-eth"

# =============================================================================
# НАСТРОЙКИ ЛОГИРОВАНИЯ (опционально)
# =============================================================================
logging:
  # Уровень: DEBUG, INFO, WARNING, ERROR
  level: "INFO"

  # Формат: true = JSON (для ELK/Grafana), false = human-readable
  json_format: false

  # Вывод в консоль
  console: true

  # Файл логов (опционально, если указан - логи пишутся в файл)
  # file_path: "logs/collector.log"

  # Тип ротации: size (по размеру), time (по времени), none
  rotation: "size"

  # Для rotation=size: максимальный размер файла в байтах (10 MB)
  max_bytes: 10485760

  # Количество backup файлов
  backup_count: 5

  # Для rotation=time: S (секунды), M (минуты), H (часы), D (дни), midnight
  when: "midnight"

# =============================================================================
# ОБЩИЕ НАСТРОЙКИ
# =============================================================================

# Режим отладки (подробный вывод)
debug: false

# Путь к файлу со списком устройств
devices_file: "devices_ips.py"
